<!-- <link rel="stylesheet" href="/css/layout.css"> -->
<link rel="stylesheet" href="/css/home.css">
<link rel="stylesheet" href="/css/_post.css">
<link rel="stylesheet" href="css/chat_box.css">

<div class="home-container">
    <!-- left side container -->
    <div class="left-container">
        <h4 class="font-bold">News Feed</h4>
        <form class="search mt-5">
            <label class="relative block">
                <span><i class="bi bi-search absolute text-md pl-1"></i></span>
                <span class="sr-only">Search</span>
                <span class="absolute inset-y-0 left-0 flex items-center pl-2">
                  <svg class="h-5 w-5 fill-slate-300" viewBox="0 0 20 20"><!-- ... --></svg>
                </span>
                <input class="input placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm" placeholder="Search News..." type="text" name="search" required/>
              </label>
            <!-- <label class="text-xl" for="news" >Search News and read</label> -->
            <!-- <input  type="text" class="input" placeholder="Search News"> -->
            <button type="submit" class="bg-violet-600 rounded-md text-sm p-2 text-white mt-3 hover:bg-violet-800">Submit</button>
        </form>
        <div class="container">
            <ul class="news-list list-disc text-blue-800">
              
            </ul>
        </div>
    </div>
    <!-- main container -->
    <div class="main-content">

        <div class="write-post-container">

            <div class="post-input-container">
                <section id="feed-posts">
                    <h4>Posts</h4>
                    <% if(locals.user){ %>
                    <form action="/posts/create" id="new-post-form" method="POST">
                        <textarea name="content" cols="30" rows="3" id="btnShowHide"
                            placeholder="What's on your mind,<%=user.name%>?" required></textarea>
                        <!-- <input type="submit" value="Post"> -->
                        <button class="button" type="submit" value="Post">Post</button>
                    </form>
                    <% } %>

                </section>

            </div>
        </div>



        <div id="posts-list-container" class="posts-container">
            <ul>
                <% for(post of posts){ %>

                <%- include('_post') -%>

                <%} %>
            </ul>
        </div>
    </div>


    <!-- right container -->
    <div class="right-container">
        <section id="user-friends">
            <h4>Friends</h4>
            <% for(u of all_users){%>

            <div class="friend-list">
                <i class="bi bi-dot"></i>
                <div> <img src="<%=u.avatar%>" alt="<%=u.name%>" width="50"></div>
                <div> <a href="/users/profile/<%= u.id %>"><%= u.name %></a></div>
            </div>
            <% } %>
        </section>
    </div>
    
    
    <!-- include chat box in home page -->
       <%- include('_chat_box') -%>
</div>

<div class="side-bar">
    <div class="social facebook">
       <button class="Show">
        <p><i class="bi bi-people-fill"></i></p>
       </button>
       <button class="Hide">
        <p><i class="bi bi-people-fill"></i></p>
       </button>
    </div>
    <div class="social twitter">
       <button>
        <p><i class="bi bi-chat-fill"></i> </p>
       </button>
    </div>
    <div class="social google">
      <button>
        <p><i class="bi bi-rss-fill"></i></p>
      </button>
    </div>
  </div>
 
<script src="/js/fetchnewsapi.js"></script>
  <script src="/js/home_comment.js"></script>
<script src="/js/home_posts.js"></script>
<script src="/js/toggle_likes.js"></script>
<script>
    $('.toggle-like-button').each(function(){
        let self = this;
        let toggleLike = new ToggleLike(self);
    });
</script>

<script src="/js/home.js"></script>

<script src="/js/post_button.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
<script src="/js/chat_engine.js"></script>
<% if(locals.user) { %>
<script>
    new ChatEngine('user-chat-box' , '<%= locals.user.email %>')
</script>

<% } %>    